<h3 class="text-center">All Tasks</h3>

<div class="d-flex justify-content-center mb-3">
  <%= link_to new_task_path(@user), class: 'btn btn-success' do %>
    <span>Create Task</span>
    <i class="fas fa-plus-circle"></i>
  <% end %>
</div>

<div class="task-grid">
  <% @tasks.each do |task| %>
    <div class="card-product">
      <% task.photos.each do |photo| %>
        <div class="card-product-image">
          <%= cl_image_tag(photo.key, height: 300, width: 400, crop: :fill) %>
        </div>
      <% end %>

      <div class="card-product-infos">
        <div class="row">
          <div class="col">
            <h2 class="title a"><a href="<%= task_path(task) %>"><%= task.title %></a></h4>
            <p><%= task.description %></p>
          </div>

          <div class="col card-product-text-right">
            <div data-controller="">
              <div class="d-none" data-timer-target="deadline"><%= task.due_date %></div>
              <span class="hours" data-timer-target="hours"><%= task.hours_remaining %></span>:
              <span class="minutes" data-timer-target="minutes"><%= task.minutes_remaining %></span>
            </div>
            <br>
            <div class="d-flex justify-content-end">
              <%= link_to edit_task_path(task), class: 'btn btn-primary' do %>
                <i class="fas fa-edit"></i>
              <% end %>
              <%= link_to destroy_task_path(task), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' do %>
                <i class="fas fa-trash-alt"></i>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
